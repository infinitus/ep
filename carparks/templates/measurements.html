<html>
    <head>
        <title>Measurements</title>
        <style type="text/css">
            body {
                line-height: 1.6em;
            }
            #minimaltable {
                font-family: "Lucida Sans Unicode", "Lucida Grande", Sans-Serif;
                font-size: 12px;
                background: #fff;
                margin: 45px;
                width: 550px;
                border-collapse: collapse;
                text-align: center;
            }

            #minimaltable th{
                font-size: 14px;
                font-weight: normal;
                color: #039;
                padding: 10px 8px;
                border-bottom: 2px solid #6678b1;
            }

            #minimaltable td{
                color: #669;
                padding: 9px 8px 8px 8px;
            }

            #minimaltable tbody tr:hover td{
                color: #009;
            }
        </style>
        <script>
            <!--

            /*
            Auto Refresh Page with Time script
            By JavaScript Kit (javascriptkit.com)
            Over 200+ free scripts here!
            */

            //enter refresh time in "minutes:seconds" Minutes should range from 0 to inifinity. Seconds should range from 0 to 59
            var limit="0:02"

            if (document.images){
                var parselimit=limit.split(":")
                parselimit=parselimit[0]*60+parselimit[1]*1
            }
            function beginrefresh(){
                if (!document.images)
                return
                if (parselimit==1)
                window.location.reload()
                else{ 
                    parselimit-=1
                    curmin=Math.floor(parselimit/60)
                    cursec=parselimit%60
                    if (curmin!=0)
                    curtime=curmin+" minutes and "+cursec+" seconds left until page refresh!"
                    else
                    curtime=cursec+" seconds left until page refresh!"
                    window.status=curtime
                    setTimeout("beginrefresh()",1000)
                }
            }

            window.onload=beginrefresh
            //-->
        </script>
    </head>

    <body>
    {% if measurements %}
        <table id="minimaltable" summary="Live measurements" border="1">
            <th scope="col">Location</th>
            <th scope="col">Node</th>
            <th scope="col">Lot status</th>
            <th scope="col">Raw reading</th>
            <th scope="col">Battery %</th>
            <th scope="col">Sequence no.</th>
            <th scope="col">Created</th>
            {% for measurement in measurements %}
            <tr>
                <td>{{ measurement.node.cluster }}</td>
                <td>{{ measurement.node }}</td>
                <td>{{ measurement.isTaken }}</td>
                <td>{{ measurement.raw_reading }}</td>
                <td>{{ measurement.batt }}</td>
                <td>{{ measurement.seq }}</td>
                <td>{{ measurement.created }}</td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No measurements were found.</p>
    {% endif %}
    </body>
</html>
